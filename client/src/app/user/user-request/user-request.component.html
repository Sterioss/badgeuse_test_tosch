<form [formGroup]="userRequest" (submit)="onRequestSubmit()"  class="text-center">

    <h3 class="mb-3">Justifier une absence</h3>

    <!-- INFO -->
    <div class="ml-5 mr-5">
        <div class="alert alert-info d-flex" role="alert">
            <div class="h2 mr-5 ml-4">
                <fa-icon [icon]="faInfoCircle"></fa-icon>
            </div>
            <div class="h-100 pt-2">
                A travers ce formulaire, choissez la raison de votre absence, la période ou le jour de votre absence. Vous pouvez
                fournire un justificatif et/ou  décrire la raison dans l'espace commentaire.
            </div>
        </div>
    </div>

    <div class="ml-5 mr-5 p-5 d-flex border shadow">

        <div class="w-100 mr-2">
            <!-- SELECT BOX -->
                <div class="form-group border rounded input-group-top">
                    <label for="inputMotif" class="pl-3">* Raison de l'absence</label>
                    <select id="inputMotif" class="custom-select border-0 rounded-0" formControlName="reason">
                        <option [selected]="true" value="0" disabled>Choisissez une raison</option>
                        <option *ngFor="let reason of reasonList" [value]="reason.id_reason">{{ reason.nom_reason | titlecase}}</option>
                    </select>
                </div>


            <!-- INPUT DATE -->

            <!-- nav -->
            <div class="nav nav-tabs to-border-blue" id="nav-tab" role="tablist">
                <a class="nav-item nav-link bg-blue active"
                   id="nav-graphic-tab"
                   data-toggle="tab"
                   href="#nav-graphic"
                   role="tab"
                   aria-controls="nav-graphic"
                   aria-selected="true"
                   (click)="onJustifiedPeriod()"
                >
                    Justifier une période
                </a>
                <a class="nav-item nav-link bg-blue"
                   id="nav-table-tab"
                   data-toggle="tab"
                   href="#nav-table"
                   role="tab"
                   aria-controls="nav-table"
                   aria-selected="false"
                   (click)="onJustifiedPeriod()"
                >
                    Justifier une journée
                </a>
            </div>
            <!-- content nav-->
            <div class="tab-content pt-3 mb-3" id="nav-tabContent">

                <!-- Justifier une période -->
                <div class="tab-pane fade show active" id="nav-graphic" role="tabpanel" aria-labelledby="nav-graphic-tab">

                    <div class="form-group border rounded input-group-top">
                        <label for="startDate" class="pl-3">* La période d'absence commence le:</label>
                        <input type="Date" class="form-control border-0 rounded-0" id="startDate"
                               formControlName="startDate"
                               (change)="inputPop('startDate')"
                               data-toggle="popover" data-placement="right" data-trigger="manual"
                               data-content="endDate"
                        >

                    </div>
                    <div class="form-group border rounded input-group-top">
                        <label for="endDate" class="pl-3"> *La période d'absence termine le:</label>
                        <input type="Date" class="form-control border-0 rounded-0" id="endDate"
                               formControlName="endDate"
                               (change)="inputPop('endDate')"
                               data-toggle="popover" data-placement="right" data-trigger="manual"
                               data-content="endDate"
                        >
                    </div>
                </div>

                <!-- justifier une journée -->
                <div class="tab-pane fade" id="nav-table" role="tabpanel" aria-labelledby="nav-table-tab">

                    <div class="form-group border rounded input-group-top">
                        <label for="dateOnly" class="pl-3">* Date de l'absence</label>
                        <input type="Date" class="form-control border-0 rounded-0" id="dateOnly"
                               formControlName="dateOnly">
                    </div>
                    <div class="form-group">
                        <div class="input-group border rounded">

                            <div class="input-group-prepend">
                                <div class="input-group-text">
                                    <input type="checkbox" class="" id="halfDay"
                                           formControlName="halfDay">
                                </div>
                            </div>
                            <label for="halfDay" class="form-control text-left">A cocher pour compter une demi-journée.</label>
                        </div>
                    </div>

                </div>
            </div>

            <!-- INPUT FILE -->
            <div class="form-group border rounded input-group-top">
                <label for="justifFormControlFile1" class="pl-3">Justificatif</label>
                <input type="file" class="form-control-file border-0 rounded-0" id="justifFormControlFile1"
                       placeholder="renseigner un justificatif">
            </div>

            <!-- SUBMIT -->
            <button type="submit" [disabled]="!userRequest.valid || userRequest.get('reason').value === 0 || processing" class="btn btn-primary w-100 bg-blue">Soumettre la justification d'absence</button>
        </div>

        <!-- INPUT COMMENT -->
        <div class="w-100 ml-2">
            <div class="form-group  rounded input-group-top">
                <label for="comment" class="pl-3">Commentaire</label>
                <textarea class="form-control rounded-0" rows="18" id="comment" placeholder="Ajouter un Commentaire"
                          formControlName="comment"></textarea>
            </div>
        </div>


    </div>
</form>
